'use strict';

var tslib = require('tslib');
var urllib = require('urllib');
var out = require('./out.js');

/**
 * 网络请求封装
 * @param url
 * @param reqOpts
 */
const request = (url, reqOpts) => tslib.__awaiter(void 0, void 0, void 0, function* () {
    const opts = Object.assign({ contentType: 'json', dataType: 'json', headers: Object.assign({ 'User-Agent': 'FeiShu X' }, reqOpts === null || reqOpts === void 0 ? void 0 : reqOpts.headers), compressed: true, 
        // 超时时间 60s
        timeout: Number(process.env.REQUEST_TIMEOUT) || 60000 }, reqOpts);
    out.default.debug(`API请求URL: ${url}`);
    out.default.debug(`API请求参数: ${JSON.stringify(opts)}`);
    return urllib.request(url, opts);
});

exports.request = request;
//# sourceMappingURL=request.js.map
